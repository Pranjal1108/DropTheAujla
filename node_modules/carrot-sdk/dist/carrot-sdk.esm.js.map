{"version":3,"file":"carrot-sdk.esm.js","sources":["../src/entities/fraction.ts","../src/entities/currency-amount.ts","../src/constants.ts","../src/entities/currency.ts","../src/entities/kpi-token.ts"],"sourcesContent":["import invariant from 'tiny-invariant'\nimport { Decimal } from 'decimal.js-light'\nimport { BigNumber } from '@ethersproject/bignumber'\n\nexport class Fraction {\n  public readonly numerator: BigNumber\n  public readonly denominator: BigNumber\n\n  public constructor(numerator: BigNumber, denominator: BigNumber) {\n    this.numerator = numerator\n    this.denominator = denominator\n  }\n\n  public add(other: Fraction): Fraction {\n    if (this.denominator.eq(other.denominator)) {\n      return new Fraction(this.numerator.add(other.numerator), this.denominator)\n    }\n    return new Fraction(\n      this.numerator.mul(other.denominator).add(other.numerator.mul(this.denominator)),\n      this.denominator.mul(other.denominator)\n    )\n  }\n\n  public subtract(other: Fraction): Fraction {\n    if (this.denominator.eq(other.denominator)) {\n      return new Fraction(this.numerator.sub(other.numerator), this.denominator)\n    }\n    return new Fraction(\n      this.numerator.mul(other.denominator).sub(other.numerator.mul(this.denominator)),\n      this.denominator.mul(other.denominator)\n    )\n  }\n\n  public lessThan(other: Fraction): boolean {\n    return this.numerator.mul(other.denominator).lt(other.numerator.mul(this.denominator))\n  }\n\n  public equalTo(other: Fraction): boolean {\n    return this.numerator.mul(other.denominator).eq(other.numerator.mul(this.denominator))\n  }\n\n  public greaterThan(other: Fraction): boolean {\n    return this.numerator.mul(other.denominator).gt(other.numerator.mul(this.denominator))\n  }\n\n  public isZero(): boolean {\n    return this.numerator.eq(0)\n  }\n\n  public multiply(other: Fraction): Fraction {\n    return new Fraction(this.numerator.mul(other.numerator), this.denominator.mul(other.denominator))\n  }\n\n  public divide(other: Fraction): Fraction {\n    return new Fraction(this.numerator.mul(other.denominator), this.denominator.mul(other.numerator))\n  }\n\n  public toFixed(decimalPlaces: number): string {\n    invariant(Number.isInteger(decimalPlaces), `${decimalPlaces} is not an integer.`)\n    invariant(decimalPlaces >= 0, `${decimalPlaces} is negative.`)\n    return new Decimal(this.numerator.toString()).dividedBy(this.denominator.toString()).toFixed(decimalPlaces)\n  }\n}\n","import { Currency, Token } from './currency'\nimport invariant from 'tiny-invariant'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { Fraction } from './fraction'\n\nexport class CurrencyAmount extends Fraction {\n  public readonly currency: Currency\n\n  public constructor(currency: Currency, amount: BigNumber | Fraction) {\n    if (amount instanceof Fraction) {\n      super(amount.numerator, amount.denominator)\n    } else {\n      super(amount, BigNumber.from(10).pow(currency.decimals))\n    }\n    this.currency = currency\n  }\n\n  public plus(other: CurrencyAmount): CurrencyAmount {\n    invariant(this.currency.equals(other.currency), 'tried to sum different currencies')\n    return new CurrencyAmount(this.currency, super.add(other))\n  }\n\n  public minus(other: CurrencyAmount): CurrencyAmount {\n    invariant(this.currency.equals(other.currency), 'tried to subtract different currencies')\n    return new CurrencyAmount(this.currency, super.subtract(other))\n  }\n\n  public multiply(other: CurrencyAmount): CurrencyAmount {\n    return new CurrencyAmount(other.currency, super.multiply(other))\n  }\n}\n\nexport class TokenAmount extends CurrencyAmount {\n  public readonly token: Token\n\n  public constructor(token: Token, amount: BigNumber | Fraction) {\n    super(token, amount)\n    this.token = token\n  }\n}\n","import FACTORY_ABI from './abis/factory.json'\nimport ERC20_ABI from './abis/erc20.json'\nimport REALITY_ABI from './abis/reality.json'\nimport KPI_TOKEN_ABI from './abis/kpi-token.json'\n\nexport const ZERO_ADDRESS = '0x0000000000000000000000000000000000000000'\n\nexport enum ChainId {\n  MAINNET = 1,\n  RINKEBY = 4,\n}\n\nexport const FACTORY_ADDRESS: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: ZERO_ADDRESS,\n  [ChainId.RINKEBY]: '0xa60c831dc30A6564Aa23044Ade594C2f1e3c9929',\n}\n\nexport const REALITY_ADDRESS: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: '0x325a2e0F3CCA2ddbaeBB4DfC38Df8D19ca165b47',\n  [ChainId.RINKEBY]: '0x3D00D77ee771405628a4bA4913175EcC095538da',\n}\n\nexport { FACTORY_ABI, REALITY_ABI, ERC20_ABI, KPI_TOKEN_ABI }\n","import { getAddress, isAddress } from '@ethersproject/address'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { ChainId } from '../constants'\nimport invariant from 'tiny-invariant'\n\nexport class Currency {\n  public readonly decimals: BigNumber\n  public readonly symbol: string\n  public readonly name: string\n\n  public static ETHER = new Currency(BigNumber.from(18), 'ETH', 'Ether')\n\n  public constructor(decimals: BigNumber, symbol: string, name: string) {\n    this.decimals = decimals\n    this.symbol = symbol\n    this.name = name\n  }\n\n  public static getNative(chainId: ChainId): Currency {\n    switch (chainId) {\n      case ChainId.RINKEBY:\n      case ChainId.MAINNET: {\n        return Currency.ETHER\n      }\n      default: {\n        invariant(false, 'not a valid chain id when getting native currency')\n      }\n    }\n  }\n\n  public equals(other: Currency): boolean {\n    if (this instanceof Token && other instanceof Token) {\n      return this.equals(other)\n    }\n    return this === other\n  }\n}\n\nexport class Token extends Currency {\n  public readonly chainId: ChainId\n  public readonly address: string\n\n  public constructor(chainId: ChainId, address: string, decimals: BigNumber, symbol: string, name: string) {\n    super(decimals, symbol, name)\n    this.chainId = chainId\n    invariant(isAddress(address), `${address} is not a valid address`)\n    this.address = getAddress(address)\n  }\n\n  public equals(other: Token): boolean {\n    if (this === other) {\n      return true\n    }\n    return this.chainId === other.chainId && this.address === other.address\n  }\n}\n","import { ChainId } from '../constants'\nimport { TokenAmount } from './currency-amount'\nimport invariant from 'tiny-invariant'\nimport { Token } from './currency'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { DateTime } from 'luxon'\nimport Decimal from 'decimal.js-light'\n\nexport class KpiToken extends Token {\n  public readonly kpiId: string\n  public readonly totalSupply: TokenAmount\n  public readonly oracle: string\n  public readonly question: string\n  public readonly lowerBound: BigNumber\n  public readonly higherBound: BigNumber\n  public readonly finalProgress: BigNumber\n  public readonly expiresAt: DateTime\n  public readonly finalized: boolean\n  public readonly kpiReached: boolean\n  public readonly creator: string\n  public readonly collateral: TokenAmount\n  public readonly fee: TokenAmount\n\n  constructor(\n    chainId: ChainId,\n    address: string,\n    symbol: string,\n    name: string,\n    kpiId: string,\n    totalSupply: BigNumber,\n    oracle: string,\n    question: string,\n    lowerBound: BigNumber,\n    higherBound: BigNumber,\n    finalProgress: BigNumber,\n    expiresAt: DateTime,\n    finalized: boolean,\n    kpiReached: boolean,\n    creator: string,\n    collateral: TokenAmount,\n    fee: TokenAmount\n  ) {\n    super(chainId, address, BigNumber.from('18'), symbol, name)\n    invariant(collateral.token.chainId === chainId, 'inconsistent chain id in collateral')\n    invariant(fee.token.equals(collateral.token), 'inconsistent collateral and fee token')\n    invariant(fee.token.chainId === chainId, 'inconsistent chain id in collateral')\n    invariant(lowerBound.lt(higherBound), 'inconsistent scalar bounds')\n    this.kpiId = kpiId\n    this.totalSupply = new TokenAmount(this, totalSupply)\n    this.oracle = oracle\n    this.question = question\n    this.lowerBound = lowerBound\n    this.higherBound = higherBound\n    this.finalProgress = finalProgress\n    this.expiresAt = expiresAt\n    this.finalized = finalized\n    this.kpiReached = kpiReached\n    this.creator = creator\n    this.collateral = collateral\n    this.fee = fee\n  }\n\n  public get progressPercentage(): Decimal {\n    const kpiScalarRange = this.higherBound.sub(this.lowerBound)\n    return new Decimal(this.finalProgress.toString()).dividedBy(kpiScalarRange.toString()).times(100)\n  }\n}\n"],"names":["Fraction","numerator","denominator","add","other","eq","mul","subtract","sub","lessThan","lt","equalTo","greaterThan","gt","isZero","multiply","divide","toFixed","decimalPlaces","Number","isInteger","invariant","Decimal","toString","dividedBy","CurrencyAmount","currency","amount","BigNumber","from","pow","decimals","plus","equals","minus","TokenAmount","token","ZERO_ADDRESS","ChainId","FACTORY_ADDRESS","MAINNET","RINKEBY","REALITY_ADDRESS","Currency","symbol","name","getNative","chainId","ETHER","Token","address","isAddress","getAddress","KpiToken","kpiId","totalSupply","oracle","question","lowerBound","higherBound","finalProgress","expiresAt","finalized","kpiReached","creator","collateral","fee","kpiScalarRange","times"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}